# ğŸš€ BookMate v1.1 - Quick Start Guide

**Ready-to-Use Code Snippets for Authentication Implementation**

---

## ğŸ“¦ Step 1: Install Dependencies (5 minutes)

```bash
# Navigate to project
cd "/Users/shaunducker/Desktop/BookMate Mobile Application/BOOK-MATE-APPLICATION-2"

# Install required packages
npx expo install expo-secure-store
npm install axios jwt-decode
npm install --save-dev @types/jwt-decode
```

---

## ğŸ“ Step 2: Update Environment Variables (2 minutes)

Add to `.env` file:
```bash
# API Configuration
EXPO_PUBLIC_API_BASE_URL=https://accounting.siamoon.com/api

# Test Credentials (for development only)
# Email: shaun@siamoon.com
# Password: Shaun231!
```

---

## ğŸ”§ Step 3: Copy & Paste Code Files

### File 1: `src/utils/secureStorage.ts`
Copy from: `V1.1_AUTHENTICATION_IMPLEMENTATION_PLAN.md` â†’ Section 1
Status: âœ… Ready to use as-is

### File 2: `src/types/auth.ts`
Copy from: Plan â†’ Section 2
Status: âœ… Ready to use as-is

### File 3: `src/services/auth/authService.ts`
Copy from: Plan â†’ Section 3
Status: âœ… Ready to use as-is

### File 4: `src/contexts/AuthContext.tsx`
Copy from: Plan â†’ Section 4
Status: âœ… Ready to use as-is

### File 5: `src/screens/auth/LoginScreen.tsx`
Copy from: Plan â†’ Section 5
Status: âœ… Ready to use as-is

### File 6: `src/services/auth/authInterceptor.ts`
Copy from: Plan â†’ Section 6
Status: âœ… Ready to use as-is

### File 7: `src/utils/validators.ts`
Copy from: Plan â†’ Section 7
Status: âœ… Ready to use as-is

---

## ğŸ¨ Step 4: Update App.tsx (10 minutes)

Wrap your app with AuthProvider:

```typescript
import React from 'react';
import { AuthProvider } from './src/contexts/AuthContext';
import { Navigation } from './src/navigation'; // Your navigation component

export default function App() {
  return (
    <AuthProvider>
      <Navigation />
    </AuthProvider>
  );
}
```

---

## ğŸ§­ Step 5: Create Navigation Logic (15 minutes)

Create `src/navigation/index.tsx`:

```typescript
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { useAuth } from '../contexts/AuthContext';
import { LoginScreen } from '../screens/auth/LoginScreen';
import { DashboardScreen } from '../screens/dashboard/DashboardScreen';
import { ActivityIndicator, View } from 'react-native';

const Stack = createNativeStackNavigator();

export const Navigation: React.FC = () => {
  const { isAuthenticated, isLoading } = useAuth();

  if (isLoading) {
    return (
      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>
        <ActivityIndicator size="large" />
      </View>
    );
  }

  return (
    <NavigationContainer>
      <Stack.Navigator screenOptions={{ headerShown: false }}>
        {isAuthenticated ? (
          <>
            <Stack.Screen name="Dashboard" component={DashboardScreen} />
            {/* Add other authenticated screens here */}
          </>
        ) : (
          <>
            <Stack.Screen name="Login" component={LoginScreen} />
            {/* Add other auth screens here */}
          </>
        )}
      </Stack.Navigator>
    </NavigationContainer>
  );
};
```

---

## âœ… Step 6: Test the Implementation (20 minutes)

### Test 1: Login Flow
```bash
# Run the app
npx expo start

# Test credentials:
# Email: shaun@siamoon.com
# Password: Shaun231!
```

**Expected Result:**
1. App shows login screen
2. Enter credentials
3. Redirects to dashboard
4. User stays logged in after app restart

### Test 2: Logout Flow
Add logout button to dashboard:

```typescript
import { useAuth } from '../contexts/AuthContext';

const DashboardScreen = () => {
  const { logout } = useAuth();
  
  return (
    <View>
      <Button title="Logout" onPress={logout} />
    </View>
  );
};
```

**Expected Result:**
1. Click logout
2. Redirects to login screen
3. Tokens cleared

---

## ğŸ› Quick Troubleshooting

### Problem: "expo-secure-store" not found
**Solution:**
```bash
npx expo install expo-secure-store
```

### Problem: TypeScript errors
**Solution:**
```bash
npm install --save-dev @types/jwt-decode
```

### Problem: Login returns 401
**Solution:**
- Check API URL is correct
- Verify credentials: `shaun@siamoon.com` / `Shaun231!`
- Check network connection

### Problem: Tokens not persisting
**Solution:**
- Test on physical device (not simulator)
- Check SecureStore permissions
- Clear app data and retry

---

## ğŸ“Š Integration with Existing API Calls

Update your existing API service (`src/services/api.ts`):

```typescript
import axios from 'axios';
import './auth/authInterceptor'; // Import to activate interceptor

const API_BASE_URL = process.env.EXPO_PUBLIC_API_BASE_URL || 'https://accounting.siamoon.com/api';

// Your existing API calls now automatically include auth token
export const apiService = {
  getOptions: () => axios.get(`${API_BASE_URL}/options`),
  getBalance: (month?: string) => axios.get(`${API_BASE_URL}/balance?month=${month}`),
  // ... rest of your API calls
};
```

The interceptor automatically:
- âœ… Adds auth token to all requests
- âœ… Refreshes expired tokens
- âœ… Retries failed requests

---

## ğŸ¯ Testing Checklist

After implementation, verify:

- [ ] âœ… Login with valid credentials works
- [ ] âœ… Login with invalid credentials shows error
- [ ] âœ… User stays logged in after app restart
- [ ] âœ… Logout clears session and redirects to login
- [ ] âœ… API calls include auth token
- [ ] âœ… Token auto-refreshes on expiry
- [ ] âœ… Network errors handled gracefully

---

## ğŸ“± Build & Deploy

When ready to deploy:

```bash
# Update version in app.json
# Change: "version": "1.1.0"
# Change: "ios.buildNumber": "3"

# Build for iOS
eas build --platform ios --profile production

# Submit to App Store
eas submit --platform ios --latest
```

---

## ğŸ‰ You're Done!

Your app now has:
- âœ… Secure authentication
- âœ… Token-based sessions
- âœ… Auto-refresh on expiry
- âœ… Cross-platform accounts (web + mobile)

**Next Steps:**
1. Test thoroughly on TestFlight
2. Update App Store screenshots
3. Submit v1.1 for review
4. Monitor user feedback

---

## ğŸ“ Need Help?

- **Implementation Questions:** Review `V1.1_AUTHENTICATION_IMPLEMENTATION_PLAN.md`
- **API Issues:** Contact shaun@siamoon.com
- **Bug Reports:** Create GitHub issue

**Estimated Implementation Time:** 1-2 days for experienced developer

---

*Last Updated: November 12, 2025*
